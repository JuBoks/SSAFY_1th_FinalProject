<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ssafy.apt.model.dao.AptDao">

	<select id="searchAptList" parameterType="map" resultType="aptDto">
		SELECT aptCode, aptName, aptDealAmount, aptArea, aptBuildYear, aptDealYear, aptDealMonth, aptDealDay, aptSiGunguCode, aptDongCode, aptDongName, aptRoadName, aptJibun, aptSidoName, aptGunguName, aptLng, aptLat
		FROM aptinfo
		<where>
			<if test="dongCode != null and dongCode != ''">
				AND aptDongCode = #{dongCode}
			</if>
			<if test="dealYear != null and dealYear != ''">
				AND aptDealYear = #{dealYear}
			</if>
			<if test="dealMonth != null and dealMonth != ''">
				AND aptDealMonth = #{dealMonth}
			</if>
			<if test="aptName != null and aptName != ''">
				AND aptName LIKE CONCAT('%', #{aptName}, '%')
			</if>
		</where>
		ORDER BY aptName ASC
		<if test="start != null and listsize != null">
			LIMIT #{start}, #{listsize}
		</if>
	</select>
	
	<select id="selectAptSearchCount" parameterType="map" resultType="int">
		SELECT COUNT(*)
		FROM aptinfo
		<where>
			<if test="dongCode != null and dongCode != ''">
				AND aptDongCode = #{dongCode}
			</if>
			<if test="aptName != null and aptName != ''">
				AND aptName LIKE CONCAT('%', #{aptName}, '%')
			</if>
		</where>
	</select>
	
</mapper>